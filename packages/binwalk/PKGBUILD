# This file is part of BlackArch Linux ( http://blackarch.org ).
# See COPYING for license details.

pkgname='binwalk'
pkgver='2.0.0'
pkgrel=4
groups=('blackarch' 'blackarch-firmware')
pkgdesc="A tool for searching a given binary image for embedded files"
arch=('i686' 'x86_64' 'armv6h' 'armv7h')
url="http://binwalk.org"
license=('MIT')
depends=('python2' 'python2-magic' 'python2-pyqtgraph' 'python2-opengl' 'python2-pydeep' 'p7zip' 'mtd-utils')
provides=('binwalk')
source=("git+https://github.com/devttys0/binwalk")
sha1sums=('SKIP')

build() {
  cd "$srcdir/binwalk"
  patch -N -i ../../binwalk.patch

  ./configure --prefix=/usr
  make
}

package() {
  cd "$srcdir/binwalk/"

  #make "DESTDIR=$pkgdir" install
  python2 setup.py install --root="${pkgdir}"
  sh deps.sh
}
