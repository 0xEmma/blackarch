# This file is part of BlackArch Linux ( http://blackarch.org ).
# See COPYING for license details.

pkgname='php-rfi-payload-decoder'
pkgver=r29.1a51043
pkgrel=1
groups=('blackarch' 'blackarch-cracker' 'blackarch-nfc')
pkgdesc="Decode and analyze RFI payloads developed in PHP."
url="https://github.com/bwall/PHP-RFI-Payload-Decoder"
arch=('any')
license=('BSD')
depends=('php' 'apache')
source=("$pkgname::git+https://github.com/bwall/PHP-RFI-Payload-Decoder")
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/$pkgname"
  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
  cd "$srcdir/$pkgname"
  cp -R --preserve=ownership "$srcdir/$pkgname/Decoder/" "$pkgdir/srv/http/$pkgname/Decoder"
  cp -R --preserve=ownership "$srcdir/$pkgname/DecodingServer" "$pkgdir/srv/http/$pkgname/DecodingServer"
}
