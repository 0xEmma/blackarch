pkgname=xortool
pkgver=0.93
pkgrel=1
pkgdesc="Program to search for a given string in an XOR, ROL or ROT encoded binary file."
groups=('blackarch' 'blackarch-crypto')
arch=('i686' 'x86_64')
url="https://github.com/hellman/xortool/"
license=('GPL')
depends=('python2')
source=("https://github.com/hellman/xortool/archive/v${pkgver}.tar.gz")
md5sums=('e8b49f8b0aab6e2d5e7849f7aaef87b0')

prepare(){
  cd "${srcdir}/xortool-${pkgver}"
  sed -i 's|env python$|env python2|' *.py
}

package() {
  cd "$srcdir"

  install -dm755 "${pkgdir}/usr/bin/"
  install -dm755 "${pkgdir}/usr/share/xortool"

  cd "xortool-${pkgver}"

  cp -a --no-preserve=ownership * "${pkgdir}/usr/share/xortool"
  
  ln -s "/usr/share/xortool/xortool.py" "${pkgdir}/usr/bin/xortool"
}
