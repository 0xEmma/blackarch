pkgname=beef
pkgver=0.4.4.8.50.gb2d03e9
pkgrel=1
groups=('blackarch' 'blackarch-exploitation')
pkgdesc="BeEF, the Browser Exploitation Framework - it is a penetration testing tool that focuses on the web browser"
arch=('i686' 'x86_64' 'armv6h' 'armv7h')
url='http://beefproject.com/'
install=beef.install
license=('Apache')
makedepends=('git')
depends=('ruby')
source=('git+http://github.com/beefproject/beef.git')
md5sums=('SKIP')

pkgver() {
  cd "$srcdir/beef"
  git describe | sed 's/^v//;s/-/./g;s/_/./g;s/^beef.//'
}

package() {
  cd "$srcdir/beef"

  # Base directories.
  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/beef"

  git clone $srcdir/beef ${pkgdir}/usr/share/beef

  cat > "$pkgdir/usr/bin/beef" <<EOF
#!/bin/sh
cd /usr/share/beef
ruby beef "\$@"
EOF
  chmod +x "$pkgdir/usr/bin/beef"
}
