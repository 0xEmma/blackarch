pkgname=skyjack
pkgver=079851f
groups=('blackarch' 'blackarch-misc')
pkgrel=1
pkgdesc="Takes over Parrot drones, deauthenticating their true owner and taking over control, turning them into zombie drones under your own control"
arch=('any')
url='https://github.com/samyk/skyjack'
license=('GPL')
source=('git+https://github.com/samyk/skyjack')
md5sums=('SKIP')

pkgver() {
  cd skyjack
  git describe --always | sed 's|-|.|g'
}

prepare() {
  cd "$srcdir/skyjack"

  sed -i 's|drone_control|/usr/share/skyjack|' skyjack.pl
}

# TODO: Replace NAME.
package() {
  cd "$srcdir/skyjack"

  # Base directories.
  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/doc/skyjack"
  install -dm755 "$pkgdir/usr/share/skyjack"

  install -m755 skyjack.pl "$pkgdir/usr/bin/skyjack"
  install -m644 skyjack.pl "$pkgdir/usr/share/doc/skyjack"
  install -m644 drone_control/* "$pkgdir/usr/share/skyjack"
}
