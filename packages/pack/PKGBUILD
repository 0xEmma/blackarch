pkgname=pack
_pkgname=PACK
pkgver=0.0.4
groups=(blackarch blackarch-password-attacks)
pkgrel=4
pkgdesc="Password Analysis and Cracking Kit"
url='http://thesprawl.org/projects/pack/'
arch=(any)
license=('unknown')
depends=('python2' 'aspell' 'aspell-en')
#makedepends=('patch')
source=("http://thesprawl.org/media/projects/PACK-0.0.4.tar.gz"
        "fix-all-the-things.patch")
md5sums=('710963e952e71a889a97624994400219'
         'e024f3f5dd9889cb41c794f4730055e5')

prepare() {
  cd ${srcdir}/${_pkgname}-${pkgver}

  patch -Np1 -i ../fix-all-the-things.patch
}

package() {
  cd ${srcdir}/${_pkgname}-${pkgver}

  install -dm755 $pkgname
  touch $pkgname/__init__.py

  install -d $pkgdir/usr/bin
  install -d $pkgdir/usr/share/doc/$pkgname

  install -Dm755 statsgen.py $pkgdir/usr/bin/statsgen
  install -Dm755 maskgen.py $pkgdir/usr/bin/maskgen
  install -Dm755 policygen.py $pkgdir/usr/bin/policygen
  install -Dm755 rulegen.py $pkgdir/usr/bin/rulegen
  install -Dm644 README $pkgdir/usr/share/doc/$pkgname/README

  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname
  install -Dm644 $pkgname/__init__.py $pkgdir/usr/lib/python2.7/$pkgname

  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant
  install -Dm644 enchant/*.py $pkgdir/usr/lib/python2.7/$pkgname/enchant
  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/checker
  install -Dm644 enchant/checker/*.py $pkgdir/usr/lib/python2.7/$pkgname/enchant/checker
  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/lib/enchant
  install -Dm644 enchant/lib/enchant/README.txt $pkgdir/usr/lib/python2.7/$pkgname/enchant/lib/enchant/README.txt

  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant
  install -Dm644 enchant/share/enchant/README.txt $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant/README.txt
  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant/ispell
  install -Dm644 enchant/share/enchant/ispell/README.txt $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant/ispell/README.txt
  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant/myspell
  install -Dm644 enchant/share/enchant/myspell/README.txt $pkgdir/usr/lib/python2.7/$pkgname/enchant/share/enchant/myspell/README.txt

  install -dm755 $pkgdir/usr/lib/python2.7/$pkgname/enchant/tokenize
  install -Dm644 enchant/tokenize/*.py $pkgdir/usr/lib/python2.7/$pkgname/enchant/tokenize
}
