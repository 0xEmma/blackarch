# This file is part of BlackArch Linux ( http://blackarch.org ).
# See COPYING for license details.

pkgname='protos-sip'
pkgver='2'
groups=('blackarch' 'blackarch-voip')
pkgrel=3
pkgdesc="SIP test suite"
arch=('x86_64' 'i686' 'armv7h')
url='https://www.ee.oulu.fi/research/ouspg/PROTOS_Test-Suite_c07-sip'
license=('GPL2')
depends=('java-runtime-headless')
source=("c07-sip-r2.jar::https://www.ee.oulu.fi/research/ouspg/PROTOS_Test-Suite_c07-sip?action=AttachFile&do=get&target=c07-sip-r2.jar")
sha1sums=('850f733070ae8d6facfd29dcdf9a5e859802fd7c')

package() {
  cd "$srcdir"

  install -dm755 "$pkgdir/usr/bin"
  install -dm755 "$pkgdir/usr/share/protos-sip"

  cp -a --no-preserve=ownership * "$pkgdir/usr/share/protos-sip"

  cat > "$pkgdir/usr/bin/protos-sip" << EOF
#!/bin/sh
cd /usr/share/protos-sip
exec java -jar c07-sip-r2.jar "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/protos-sip"
}
